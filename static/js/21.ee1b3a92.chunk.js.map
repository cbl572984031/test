{"version":3,"sources":["assets/js/star.js","axios/config.js","axios/index.js","page/login/index.jsx","assets/imgs/Login/react.png"],"names":["Stars","ctx","width","height","amount","this","stars","getStars","push","x","Math","random","y","r","save","fillStyle","forEach","star","beginPath","arc","PI","fill","restore","map","sign","gradient","createRadialGradient","addColorStop","fillRect","axios","interceptors","request","use","config","localStorage","hasOwnProperty","headers","token","getItem","err","message","error","response","data","code","window","location","hash","clear","getVCcode","get","Login","props","setText","bool","value","setState","isShowText","text","canvas","document","querySelector","getContext","innerWidth","innerHeight","count","frame","blink","flicker","draw","requestAnimationFrame","state","className","style","display","id","draggable","src","require","alt","SetText","Component","LoginForm","getcode","e","then","res","VCcode","catch","blurVerification","target","replace","length","setAttribute","handleSubmit","preventDefault","history","password","codeipt","htmlFor","type","maxLength","onBlur","onFocus","onChange","placeholder","onClick","React","withRouter","module","exports"],"mappings":"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","file":"static/js/21.ee1b3a92.chunk.js","sourcesContent":["export default class Stars {\r\n    constructor(ctx, width, height, amount) {\r\n        this.ctx = ctx\r\n        this.width = width\r\n        this.height = height\r\n        this.stars = this.getStars(amount)\r\n    }\r\n\r\n    //返回一堆的小星星\r\n    getStars(amount) {\r\n        let stars = []\r\n        while (amount--) {\r\n            // console.log(amount)\r\n            // 创建一个星星的坐标及大小数据描述JSON对象，添加到stars数组\r\n            stars.push({\r\n                x: Math.random() * this.width,\r\n                y: Math.random() * this.height,\r\n                r: Math.random() + 0.2\r\n            })\r\n        }\r\n        return stars\r\n    }\r\n\r\n    //画满天星\r\n    draw() {\r\n        let ctx = this.ctx\r\n        ctx.save() //保存canvas当前绘制，一般新绘制前调用\r\n        ctx.fillStyle = 'white'\r\n        //star 是从stars里的一颗star 这里是function的参数\r\n        this.stars.forEach(star => {\r\n            ctx.beginPath() //开始绘制\r\n            ctx.arc(star.x, star.y, star.r, 0, 2 * Math.PI) //画椭圆\r\n            ctx.fill() //填充色\r\n        })\r\n        ctx.restore() //再次保存\r\n    }\r\n\r\n    //星星没隔10帧闪一下\r\n    blink() {\r\n        //map方法 找到合适的星星放进新数组 匹配\r\n        this.stars = this.stars.map(star => {\r\n            let sign = Math.random() > 0.5 ? 1 : -1\r\n            star.r += sign * 0.2\r\n            if (star.r < 0) {\r\n                star.r = -star.r\r\n            } else if (star.r > 1) {\r\n                star.r -= 0.2\r\n            }\r\n            return star\r\n        })\r\n    }\r\n    // 背景的天空\r\n    flicker() {\r\n        let ctx = this.ctx,\r\n            gradient = ctx.createRadialGradient(150, 150, 60, 100, 100, 400);\r\n        gradient.addColorStop(1, 'rgb(0,0,10)')\r\n        ctx.save()\r\n        ctx.fillStyle = gradient\r\n        ctx.fillRect(0, 0, this.width, this.height)\r\n        ctx.restore()\r\n    }\r\n}","import axios from 'axios';\r\nimport { message } from 'antd';\r\n\r\naxios.interceptors.request.use(\r\n    config => {\r\n        if (localStorage.hasOwnProperty('token')) {\r\n            config.headers.token = localStorage.getItem('token')\r\n            return config\r\n        }\r\n        return config\r\n    },\r\n    err => {\r\n        message.error(err);\r\n    }\r\n)\r\n\r\naxios.interceptors.response.use(\r\n    response => {\r\n        if (response.data.code !== 100) {\r\n            // message.error(response.data.mesg);\r\n            if (response.data.code === 400 || response.data.code === 401) {\r\n                window.location.hash = '/login'\r\n                localStorage.clear()\r\n                return\r\n            }\r\n        }\r\n        return response\r\n    }\r\n)\r\n\r\nexport default axios","import axios from './config'\r\n\r\nexport const getVCcode = (params = {}) => {\r\n    return axios.get('/aerospace/auth/token');\r\n}","import React, { Component } from 'react'\r\nimport Stars from \"../../assets/js/star\"\r\nimport { getVCcode } from '../../axios/index'\r\nimport { withRouter } from 'react-router-dom'\r\n\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            isShowText: false,\r\n            text: ''\r\n        }\r\n    }\r\n\r\n    setText = (bool, value) => {\r\n        this.setState({\r\n            isShowText: bool,\r\n            text: value\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.canvas();\r\n    }\r\n\r\n    canvas = () => {\r\n        let canvas = document.querySelector('#canvas'),\r\n            ctx = canvas.getContext('2d'),\r\n            width = window.innerWidth,\r\n            height = window.innerHeight,\r\n            stars = new Stars(ctx, width, height, 200),\r\n            count = 0\r\n        canvas.width = width\r\n        canvas.height = height\r\n\r\n        const frame = () => {\r\n            count++\r\n            count % 10 === 0 && stars.blink()\r\n            stars.flicker()\r\n            stars.draw()\r\n            requestAnimationFrame(frame)\r\n        }\r\n        frame()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"login-box\">\r\n                <div className=\"ipt\" style={this.state.isShowText ? {} : { display: 'none' }}>\r\n                    <p>>: <span>{this.state.text}</span></p>\r\n                </div>\r\n                <canvas id=\"canvas\"></canvas>\r\n                <img className=\"bg\" draggable=\"false\" src={require('../../assets/imgs/Login/react.png')} alt=\"背景\" />\r\n                <div className=\"title\">\r\n                    {/* <img src={require('../logo.svg')} draggable=\"false\" alt=\"react\" className=\"react\" /> */}\r\n                    <p id=\"title\">react admin</p>\r\n                </div>\r\n                <LoginForm SetText={this.setText} {...this.props}></LoginForm>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nclass LoginForm extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            VCcode: '',\r\n            id: '',\r\n            password: '',\r\n            codeipt: '',\r\n        }\r\n        // this.getcode()\r\n    }\r\n\r\n    getcode = (e) => {\r\n        getVCcode().then(res => {\r\n            if (res.data.code === '100') {\r\n                this.setState({\r\n                    VCcode: res.data.data,\r\n                })\r\n            }\r\n        }).catch(err => {\r\n\r\n        })\r\n    }\r\n\r\n    blurVerification = (e) => {\r\n        if (e.target.value.replace(/\\s*/g, '').length <= 0) {\r\n            e.target.setAttribute('style', 'border-color:red');\r\n        } else {\r\n            e.target.setAttribute('style', '');\r\n        }\r\n        this.props.SetText(false, e.target.value)\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // if (this.state.id.replace(/\\s*/g, '').length <= 0) {\r\n        //     message.warning('用户名不能为空!')\r\n        //     return\r\n        // }\r\n        // if (this.state.password.replace(/\\s*/g, '').length <= 0) {\r\n        //     message.warning('密码不能为空!')\r\n        //     return\r\n        // }\r\n        // if (this.state.codeipt.replace(/\\s*/g, '').length <= 0) {\r\n        //     message.warning('验证码不能为空!')\r\n        //     return\r\n        // }\r\n\r\n        // let obj = {\r\n        //     loginName: this.state.id,\r\n        //     password: this.state.password,\r\n        //     captcha: this.state.codeipt,\r\n        //     token: this.state.VCcode\r\n        // }\r\n\r\n        this.props.history.push('/')\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"lodin\">\r\n                <div className=\"input-wrap\" >\r\n                    <label htmlFor=\"ID\" className=\"ID_label\"></label>\r\n                    <input type=\"text\" maxLength=\"18\" onBlur={this.blurVerification} onFocus={e => { this.props.SetText(true, e.target.value) }} onChange={e => { this.setState({ id: e.target.value }); this.props.SetText(true, e.target.value) }} placeholder=\"用户名/ID\" id=\"ID\" />\r\n                </div>\r\n                <div>\r\n                    <label htmlFor=\"password\" className=\"password_label\"></label>\r\n                    <input type=\"password\" maxLength=\"18\" onBlur={this.blurVerification} onChange={e => { this.setState({ password: e.target.value }) }} placeholder=\"密码\" id=\"password\" />\r\n                </div>\r\n                <div>\r\n                    <input type=\"text\" onBlur={this.blurVerification} onChange={e => { this.setState({ codeipt: e.target.value }) }} maxLength=\"4\" placeholder=\"验证码\" id=\"VCcode\" />\r\n                    <img className=\"VCcode\" draggable=\"false\" onClick={this.getcode} src={'http://hxkt.api.4008990000.net/aerospace/auth/captcha?token=' + this.state.VCcode} alt=\"验证码\" />\r\n                </div>\r\n                <div className=\"submit\" onClick={this.handleSubmit}>登录</div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(Login);\r\n/**\r\n *  2019-09-09 直接搬以前写着玩的登录页\r\n */","module.exports = __webpack_public_path__ + \"static/media/react.22229134.png\";"],"sourceRoot":""}